# Chess Trainer Bot

A simple chess bot for [lichess.org](https://lichess.org) that plays moves using the lichess opening explorer with the Masters' database. Once we're out of book moves, the bot will try to match the opponent's rating so that you always get a fair game, using Stockfish.

## Setup

1. **Install Stockfish 16 and Python dependencies**
   ```bash
   ./setup.sh
   ```
   The script uses `apt-get` to install Stockfish 16 (via the `stockfish` package) and then installs the Python requirements listed in `requirements.txt`.

2. **Configure your environment**
   Copy `.env_example` to `.env` and replace the token value with your Lichess bot token.
   
   Note: You will need to create a Lichess BOT account first, see instructions here: https://lichess.org/api#tag/Bot/operation/botAccountUpgrade
   ```bash
   cp .env_example .env
   # edit .env and set LICHESS_BOT_TOKEN
   ```
## Running the bot

Execute the package as a module:

```bash
python -m chess_trainer.trainer
```

You will be prompted to choose preferred openings and the bot will start listening for games on Lichess. Moves will be selected from the Lichess opening explorer when possible and otherwise generated by Stockfish 16.

### Web setup

If you prefer a small web UI instead of the command line prompts run:

```bash
python -m chess_trainer.frontend
```

Your browser will open `http://localhost:8000/` where you can pick your preferred openings and enter the username you wish to challenge. When you submit the form, the challenge URL from Lichess opens in a new tab so you can accept it. The game page is then opened automatically once Lichess starts the game.

## Files

- `chess_trainer/trainer.py` – main entry point that handles events and engine interaction.
- `chess_trainer/bot_profile.py` – dataclass describing the bot's settings and default openings.
- `chess_trainer/openings_explorer.py` – helper module that queries the opening explorer and filters moves by your preferences.
- `chess_trainer/frontend.py` – simple Flask server for configuring and challenging the bot.
- `setup.sh` – installs Stockfish 16 and the required Python packages.

Enjoy your training games!
